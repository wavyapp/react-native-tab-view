{"version":3,"names":["React","_interopRequireWildcard","require","_reactNative","_reactNativeGestureHandler","_reactNativeReanimated","_interopRequireDefault","_TabBar","_SceneView","_Pager","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_extends","assign","bind","target","arguments","length","source","key","prototype","apply","_defineProperty","value","_toPropertyKey","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","GestureHandlerWrapper","GestureHandlerRootView","View","TabView","Component","constructor","args","layout","width","height","props","initialLayout","index","navigationState","onIndexChange","nativeEvent","state","setState","render","position","positionListener","onSwipeStart","onSwipeEnd","lazy","lazyPreloadDistance","removeClippedSubviews","keyboardDismissMode","swipeEnabled","swipeVelocityImpact","timingConfig","springConfig","tabBarPosition","renderTabBar","renderScene","renderLazyPlaceholder","sceneContainerStyle","style","gestureHandlerProps","springVelocityScale","renderPager","createElement","onLayout","handleLayout","styles","pager","jumpToIndex","children","addListener","removeListener","jumpTo","sceneRendererProps","Fragment","Code","exec","Animated","routes","map","route","loading","exports","StyleSheet","create","flex","overflow"],"sources":["TabView.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  StyleSheet,\n  View,\n  StyleProp,\n  ViewStyle,\n  LayoutChangeEvent,\n} from 'react-native';\nimport {\n  PanGestureHandler,\n  GestureHandlerRootView,\n} from 'react-native-gesture-handler';\nimport Animated from 'react-native-reanimated';\nimport TabBar, { Props as TabBarProps } from './TabBar';\nimport SceneView from './SceneView';\nimport {\n  Layout,\n  NavigationState,\n  Route,\n  SceneRendererProps,\n  PagerCommonProps,\n} from './types';\nimport Pager, { Props as ChildProps } from './Pager';\n\nexport type Props<T extends Route> = PagerCommonProps & {\n  position?: Animated.Value<number>;\n  onIndexChange: (index: number) => void;\n  navigationState: NavigationState<T>;\n  renderScene: (\n    props: SceneRendererProps & {\n      route: T;\n    }\n  ) => React.ReactNode;\n  renderLazyPlaceholder: (props: { route: T }) => React.ReactNode;\n  renderTabBar: (\n    props: SceneRendererProps & {\n      navigationState: NavigationState<T>;\n    }\n  ) => React.ReactNode;\n  tabBarPosition: 'top' | 'bottom';\n  initialLayout?: { width?: number; height?: number };\n  lazy: ((props: { route: T }) => boolean) | boolean;\n  lazyPreloadDistance: number;\n  removeClippedSubviews?: boolean;\n  sceneContainerStyle?: StyleProp<ViewStyle>;\n  style?: StyleProp<ViewStyle>;\n  gestureHandlerProps: React.ComponentProps<typeof PanGestureHandler>;\n  renderPager: (props: ChildProps<T>) => React.ReactNode;\n};\n\ntype State = {\n  layout: Layout;\n};\n\nconst GestureHandlerWrapper = GestureHandlerRootView ?? View;\n\nexport default class TabView<T extends Route> extends React.Component<\n  Props<T>,\n  State\n> {\n  static defaultProps = {\n    tabBarPosition: 'top',\n    renderTabBar: <P extends Route>(props: TabBarProps<P>) => (\n      <TabBar {...props} />\n    ),\n    renderLazyPlaceholder: () => null,\n    keyboardDismissMode: 'auto',\n    swipeEnabled: true,\n    lazy: false,\n    lazyPreloadDistance: 0,\n    removeClippedSubviews: false,\n    springConfig: {},\n    timingConfig: {},\n    gestureHandlerProps: {},\n    renderPager: (props: ChildProps<any>) => <Pager {...props} />,\n  };\n\n  state = {\n    layout: { width: 0, height: 0, ...this.props.initialLayout },\n  };\n\n  private jumpToIndex = (index: number) => {\n    if (index !== this.props.navigationState.index) {\n      this.props.onIndexChange(index);\n    }\n  };\n\n  private handleLayout = (e: LayoutChangeEvent) => {\n    const { height, width } = e.nativeEvent.layout;\n\n    if (\n      this.state.layout.width === width &&\n      this.state.layout.height === height\n    ) {\n      return;\n    }\n\n    this.setState({\n      layout: {\n        height,\n        width,\n      },\n    });\n  };\n\n  render() {\n    const {\n      position: positionListener,\n      onSwipeStart,\n      onSwipeEnd,\n      navigationState,\n      lazy,\n      lazyPreloadDistance,\n      removeClippedSubviews,\n      keyboardDismissMode,\n      swipeEnabled,\n      swipeVelocityImpact,\n      timingConfig,\n      springConfig,\n      tabBarPosition,\n      renderTabBar,\n      renderScene,\n      renderLazyPlaceholder,\n      sceneContainerStyle,\n      style,\n      gestureHandlerProps,\n      springVelocityScale,\n      renderPager,\n    } = this.props;\n    const { layout } = this.state;\n\n    return (\n      <GestureHandlerWrapper\n        onLayout={this.handleLayout}\n        style={[styles.pager, style]}\n      >\n        {renderPager({\n          navigationState,\n          layout,\n          keyboardDismissMode,\n          swipeEnabled,\n          swipeVelocityImpact,\n          timingConfig,\n          springConfig,\n          onSwipeStart,\n          onSwipeEnd,\n          onIndexChange: this.jumpToIndex,\n          springVelocityScale,\n          removeClippedSubviews,\n          gestureHandlerProps,\n          children: ({\n            position,\n            render,\n            addListener,\n            removeListener,\n            jumpTo,\n          }) => {\n            // All of the props here must not change between re-renders\n            // This is crucial to optimizing the routes with PureComponent\n            const sceneRendererProps = {\n              position,\n              layout,\n              jumpTo,\n            };\n\n            return (\n              <React.Fragment>\n                {positionListener ? (\n                  <Animated.Code\n                    exec={Animated.set(positionListener, position)}\n                  />\n                ) : null}\n                {tabBarPosition === 'top' &&\n                  renderTabBar({\n                    ...sceneRendererProps,\n                    navigationState,\n                  })}\n                {render(\n                  navigationState.routes.map((route, i) => {\n                    return (\n                      <SceneView\n                        {...sceneRendererProps}\n                        addListener={addListener}\n                        removeListener={removeListener}\n                        key={route.key}\n                        index={i}\n                        lazy={\n                          typeof lazy === 'function' ? lazy({ route }) : lazy\n                        }\n                        lazyPreloadDistance={lazyPreloadDistance}\n                        navigationState={navigationState}\n                        style={sceneContainerStyle}\n                      >\n                        {({ loading }) =>\n                          loading\n                            ? renderLazyPlaceholder({ route })\n                            : renderScene({\n                                ...sceneRendererProps,\n                                route,\n                              })\n                        }\n                      </SceneView>\n                    );\n                  })\n                )}\n                {tabBarPosition === 'bottom' &&\n                  renderTabBar({\n                    ...sceneRendererProps,\n                    navigationState,\n                  })}\n              </React.Fragment>\n            );\n          },\n        })}\n      </GestureHandlerWrapper>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  pager: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n});\n"],"mappings":"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","ignoreList":[]}