{"version":3,"names":["React","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","_memoize","_interopRequireDefault","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_defineProperty","key","value","_toPropertyKey","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","multiply","Extrapolate","Animated","interpolate","interpolateNode","TabBarIndicator","Component","constructor","args","navigationState","layout","width","getTabWidth","props","isIndicatorShown","routes","every","_","timing","opacity","duration","toValue","easing","Easing","in","linear","start","Value","memoize","position","inputRange","map","outputRange","reduce","acc","translateX","extrapolate","CLAMP","I18nManager","isRTL","componentDidMount","fadeInIndicator","componentDidUpdate","render","style","length","getTranslateX","indicatorWidth","getWidth","createElement","View","styles","indicator","transform","left","index","exports","StyleSheet","create","backgroundColor","bottom","right","height"],"sources":["TabBarIndicator.tsx"],"sourcesContent":["import * as React from 'react';\nimport { StyleSheet, I18nManager, StyleProp, ViewStyle } from 'react-native';\nimport Animated, { Easing } from 'react-native-reanimated';\n\nimport memoize from './memoize';\nimport { Route, SceneRendererProps, NavigationState } from './types';\n\nexport type GetTabWidth = (index: number) => number;\n\nexport type Props<T extends Route> = SceneRendererProps & {\n  navigationState: NavigationState<T>;\n  width: string | number;\n  style?: StyleProp<ViewStyle>;\n  getTabWidth: GetTabWidth;\n};\n\nconst { multiply, Extrapolate } = Animated;\n\n// @ts-ignore\nconst interpolate = Animated.interpolateNode || Animated.interpolate;\n\nexport default class TabBarIndicator<T extends Route> extends React.Component<\n  Props<T>\n> {\n  componentDidMount() {\n    this.fadeInIndicator();\n  }\n\n  componentDidUpdate() {\n    this.fadeInIndicator();\n  }\n\n  private fadeInIndicator = () => {\n    const { navigationState, layout, width, getTabWidth } = this.props;\n\n    if (\n      !this.isIndicatorShown &&\n      width === 'auto' &&\n      layout.width &&\n      // We should fade-in the indicator when we have widths for all the tab items\n      navigationState.routes.every((_, i) => getTabWidth(i))\n    ) {\n      this.isIndicatorShown = true;\n\n      Animated.timing(this.opacity, {\n        duration: 150,\n        toValue: 1,\n        easing: Easing.in(Easing.linear),\n      }).start();\n    }\n  };\n\n  private isIndicatorShown = false;\n\n  private opacity = new Animated.Value(this.props.width === 'auto' ? 0 : 1);\n\n  private getTranslateX = memoize(\n    (\n      position: Animated.Node<number>,\n      routes: Route[],\n      getTabWidth: GetTabWidth\n    ) => {\n      const inputRange = routes.map((_, i) => i);\n\n      // every index contains widths at all previous indices\n      const outputRange = routes.reduce<number[]>((acc, _, i) => {\n        if (i === 0) return [0];\n        return [...acc, acc[i - 1] + getTabWidth(i - 1)];\n      }, []);\n\n      const translateX = interpolate(position, {\n        inputRange,\n        outputRange,\n        extrapolate: Extrapolate.CLAMP,\n      });\n\n      return multiply(translateX, I18nManager.isRTL ? -1 : 1);\n    }\n  );\n\n  private getWidth = memoize(\n    (\n      position: Animated.Node<number>,\n      routes: Route[],\n      getTabWidth: GetTabWidth\n    ) => {\n      const inputRange = routes.map((_, i) => i);\n      const outputRange = inputRange.map(getTabWidth);\n\n      return interpolate(position, {\n        inputRange,\n        outputRange,\n        extrapolate: Extrapolate.CLAMP,\n      });\n    }\n  );\n\n  render() {\n    const {\n      position,\n      navigationState,\n      getTabWidth,\n      width,\n      style,\n      layout,\n    } = this.props;\n    const { routes } = navigationState;\n\n    const translateX =\n      routes.length > 1 ? this.getTranslateX(position, routes, getTabWidth) : 0;\n\n    const indicatorWidth =\n      width === 'auto'\n        ? routes.length > 1\n          ? this.getWidth(position, routes, getTabWidth)\n          : getTabWidth(0)\n        : width;\n\n    return (\n      <Animated.View\n        style={[\n          styles.indicator,\n          // If layout is not available, use `left` property for positioning the indicator\n          // This avoids rendering delay until we are able to calculate translateX\n          { width: indicatorWidth },\n          layout.width\n            ? { transform: [{ translateX }] as any }\n            : { left: `${(100 / routes.length) * navigationState.index}%` },\n          width === 'auto' ? { opacity: this.opacity } : null,\n          style,\n        ]}\n      />\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  indicator: {\n    backgroundColor: '#ffeb3b',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    right: 0,\n    height: 2,\n  },\n});\n"],"mappings":"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","ignoreList":[]}