{"version":3,"names":["React","StyleSheet","I18nManager","Animated","Easing","memoize","multiply","Extrapolate","interpolate","interpolateNode","TabBarIndicator","Component","constructor","args","_defineProperty","navigationState","layout","width","getTabWidth","props","isIndicatorShown","routes","every","_","i","timing","opacity","duration","toValue","easing","in","linear","start","Value","position","inputRange","map","outputRange","reduce","acc","translateX","extrapolate","CLAMP","isRTL","componentDidMount","fadeInIndicator","componentDidUpdate","render","style","length","getTranslateX","indicatorWidth","getWidth","createElement","View","styles","indicator","transform","left","index","create","backgroundColor","bottom","right","height"],"sources":["TabBarIndicator.tsx"],"sourcesContent":["import * as React from 'react';\nimport { StyleSheet, I18nManager, StyleProp, ViewStyle } from 'react-native';\nimport Animated, { Easing } from 'react-native-reanimated';\n\nimport memoize from './memoize';\nimport { Route, SceneRendererProps, NavigationState } from './types';\n\nexport type GetTabWidth = (index: number) => number;\n\nexport type Props<T extends Route> = SceneRendererProps & {\n  navigationState: NavigationState<T>;\n  width: string | number;\n  style?: StyleProp<ViewStyle>;\n  getTabWidth: GetTabWidth;\n};\n\nconst { multiply, Extrapolate } = Animated;\n\n// @ts-ignore\nconst interpolate = Animated.interpolateNode || Animated.interpolate;\n\nexport default class TabBarIndicator<T extends Route> extends React.Component<\n  Props<T>\n> {\n  componentDidMount() {\n    this.fadeInIndicator();\n  }\n\n  componentDidUpdate() {\n    this.fadeInIndicator();\n  }\n\n  private fadeInIndicator = () => {\n    const { navigationState, layout, width, getTabWidth } = this.props;\n\n    if (\n      !this.isIndicatorShown &&\n      width === 'auto' &&\n      layout.width &&\n      // We should fade-in the indicator when we have widths for all the tab items\n      navigationState.routes.every((_, i) => getTabWidth(i))\n    ) {\n      this.isIndicatorShown = true;\n\n      Animated.timing(this.opacity, {\n        duration: 150,\n        toValue: 1,\n        easing: Easing.in(Easing.linear),\n      }).start();\n    }\n  };\n\n  private isIndicatorShown = false;\n\n  private opacity = new Animated.Value(this.props.width === 'auto' ? 0 : 1);\n\n  private getTranslateX = memoize(\n    (\n      position: Animated.Node<number>,\n      routes: Route[],\n      getTabWidth: GetTabWidth\n    ) => {\n      const inputRange = routes.map((_, i) => i);\n\n      // every index contains widths at all previous indices\n      const outputRange = routes.reduce<number[]>((acc, _, i) => {\n        if (i === 0) return [0];\n        return [...acc, acc[i - 1] + getTabWidth(i - 1)];\n      }, []);\n\n      const translateX = interpolate(position, {\n        inputRange,\n        outputRange,\n        extrapolate: Extrapolate.CLAMP,\n      });\n\n      return multiply(translateX, I18nManager.isRTL ? -1 : 1);\n    }\n  );\n\n  private getWidth = memoize(\n    (\n      position: Animated.Node<number>,\n      routes: Route[],\n      getTabWidth: GetTabWidth\n    ) => {\n      const inputRange = routes.map((_, i) => i);\n      const outputRange = inputRange.map(getTabWidth);\n\n      return interpolate(position, {\n        inputRange,\n        outputRange,\n        extrapolate: Extrapolate.CLAMP,\n      });\n    }\n  );\n\n  render() {\n    const {\n      position,\n      navigationState,\n      getTabWidth,\n      width,\n      style,\n      layout,\n    } = this.props;\n    const { routes } = navigationState;\n\n    const translateX =\n      routes.length > 1 ? this.getTranslateX(position, routes, getTabWidth) : 0;\n\n    const indicatorWidth =\n      width === 'auto'\n        ? routes.length > 1\n          ? this.getWidth(position, routes, getTabWidth)\n          : getTabWidth(0)\n        : width;\n\n    return (\n      <Animated.View\n        style={[\n          styles.indicator,\n          // If layout is not available, use `left` property for positioning the indicator\n          // This avoids rendering delay until we are able to calculate translateX\n          { width: indicatorWidth },\n          layout.width\n            ? { transform: [{ translateX }] as any }\n            : { left: `${(100 / routes.length) * navigationState.index}%` },\n          width === 'auto' ? { opacity: this.opacity } : null,\n          style,\n        ]}\n      />\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  indicator: {\n    backgroundColor: '#ffeb3b',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    right: 0,\n    height: 2,\n  },\n});\n"],"mappings":"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","ignoreList":[]}